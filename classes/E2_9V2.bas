USEVAR C_RAM
GOSUB INIT_C
END

LABEL INIT_C
  DIM C_RAM(31)
  REM ram vectors
  POKE32 DATAADDRESS(C_FUNCTIONS)+1564,C_RAM+0
  POKE32 DATAADDRESS(C_FUNCTIONS)+1632,C_RAM+16
  POKE32 DATAADDRESS(C_FUNCTIONS)+1764,C_RAM+0
  POKE32 DATAADDRESS(C_FUNCTIONS)+1768,C_RAM+44
  POKE32 DATAADDRESS(C_FUNCTIONS)+1772,C_RAM+60
  POKE32 DATAADDRESS(C_FUNCTIONS)+1776,C_RAM+76
  POKE32 DATAADDRESS(C_FUNCTIONS)+1780,C_RAM+92
  POKE32 DATAADDRESS(C_FUNCTIONS)+1784,C_RAM+108
  POKE32 DATAADDRESS(C_FUNCTIONS)+2008,C_RAM+0
  POKE32 DATAADDRESS(C_FUNCTIONS)+2084,C_RAM+60
  POKE32 DATAADDRESS(C_FUNCTIONS)+2160,C_RAM+44
  POKE32 DATAADDRESS(C_FUNCTIONS)+2164,C_RAM+76
  POKE32 DATAADDRESS(C_FUNCTIONS)+2240,C_RAM+44
  POKE32 DATAADDRESS(C_FUNCTIONS)+2244,C_RAM+76
  POKE32 DATAADDRESS(C_FUNCTIONS)+3512,C_RAM+16
  REM rodata vectors
  REM ram function vectors
  POKE32 DATAADDRESS(C_FUNCTIONS)+124,DATAADDRESS(C_FUNCTIONS)+1788
  POKE32 DATAADDRESS(C_FUNCTIONS)+244,DATAADDRESS(C_FUNCTIONS)+2600
  POKE32 DATAADDRESS(C_FUNCTIONS)+1568,DATAADDRESS(C_FUNCTIONS)+2784
  REM callback function vectors
  REM Initialize C global variables
  GOSUB C_MACHIKANIA_INIT
RETURN

ALIGN4
LABEL C_EPD_2IN9_V2_INIT
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f84a,$bd00,$46c0
LABEL C_EPD_2IN9_V2_GRAY4_INIT
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f882,$bd00,$46c0
LABEL C_EPD_2IN9_V2_CLEAR
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f8b6,$bd00,$46c0
LABEL C_EPD_2IN9_V2_DISPLAY
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f8e2,$bd00,$46c0
LABEL C_EPD_2IN9_V2_DISPLAY_BASE
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f902,$bd00,$46c0
LABEL C_EPD_2IN9_V2_4GRAYDISPLAY
  EXEC $68f0,$6931,$6972,$69b3,$f000,$f93e,$bd00,$46c0
LABEL C_EPD_2IN9_V2_DISPLAY_PARTIAL
  EXEC $68f0,$6931,$6972,$69b3,$f000,$faac,$bd00,$46c0
LABEL C_EPD_2IN9_V2_SLEEP
  EXEC $68f0,$6931,$6972,$69b3,$f000,$fb24,$bd00,$46c0
LABEL C_MACHIKANIA_INIT
  EXEC $68f0,$6931,$6972,$69b3,$f000,$fb2c,$bd00,$46c0
LABEL C_DEV_GPIO_INIT
  EXEC $68f0,$6931,$6972,$69b3,$f000,$fb34,$bd00,$46c0

REM 3796 bytes
LABEL C_FUNCTIONS
EXEC $b580,$af00,$f000,$fbc4,$2064,$f000,$fbe7,$f000,$fbf3,$2012,$f000,$fc08,$f000,$fbee,$2001,$f000,
     $fc03,$2027,$f000,$fc28,$2001,$f000,$fc25,$2000,$f000,$fc22,$2011,$f000,$fbf7,$2003,$f000,$fc1c,
     $2328,$33ff,$227f,$2100,$2000,$f000,$fc3d,$2021,$f000,$fbea,$2000,$f000,$fc0f,$2080,$f000,$fc0c,
     $2100,$2000,$f000,$fc7a,$f000,$fbc6,$4b03,$0018,$f000,$fc9c,$46c0,$46bd,$bd80,$46c0,$05b0,$2000,
     $b580,$af00,$f000,$fb84,$2064,$f000,$fba7,$f000,$fbb3,$2012,$f000,$fbc8,$f000,$fbae,$2001,$f000,
     $fbc3,$2027,$f000,$fbe8,$2001,$f000,$fbe5,$2000,$f000,$fbe2,$2011,$f000,$fbb7,$2003,$f000,$fbdc,
     $2328,$33ff,$2280,$2100,$2008,$f000,$fbfd,$203c,$f000,$fbaa,$2004,$f000,$fbcf,$2100,$2001,$f000,
     $fc3d,$f000,$fb89,$4b03,$0018,$f000,$fc5f,$46c0,$46bd,$bd80,$0650,$2000,$b580,$b082,$af00,$2024,
     $f000,$fb92,$1dbb,$2200,$801a,$e007,$20ff,$f000,$fbb3,$1dbb,$881a,$1dbb,$3201,$801a,$1dbb,$881a,
     $2394,$015b,$429a,$d3f1,$2026,$f000,$fb7d,$1dbb,$2200,$801a,$e007,$20ff,$f000,$fb9e,$1dbb,$881a,
     $1dbb,$3201,$801a,$1dbb,$881a,$2394,$015b,$429a,$d3f1,$f000,$fcb3,$46c0,$46bd,$b002,$bd80,$b590,
     $b590,$b085,$af00,$6078,$2024,$f000,$fb5d,$230e,$18fb,$2200,$801a,$e00d,$240e,$193b,$881b,$687a,
     $18d3,$781b,$0018,$f000,$fb77,$193b,$881a,$193b,$3201,$801a,$230e,$18fb,$881a,$2394,$015b,$429a,
     $d3ea,$f000,$fc8b,$46c0,$46bd,$b005,$bd90,$b590,$b590,$b085,$af00,$6078,$2024,$f000,$fb35,$230e,
     $18fb,$2200,$801a,$e00d,$240e,$193b,$881b,$687a,$18d3,$781b,$0018,$f000,$fb4f,$193b,$881a,$193b,
     $3201,$801a,$240e,$193b,$881a,$2394,$015b,$429a,$d3ea,$2026,$f000,$fb18,$193b,$2200,$801a,$e00d,
     $240e,$193b,$881b,$687a,$18d3,$781b,$0018,$f000,$fb33,$193b,$881a,$193b,$3201,$801a,$230e,$18fb,
     $881a,$2394,$015b,$429a,$d3ea,$f000,$fc47,$46c0,$46bd,$b005,$bd90,$b590,$b590,$b087,$af00,$6078,
     $2024,$f000,$faf1,$2300,$617b,$e0a8,$230a,$18fb,$2200,$701a,$2300,$613b,$e094,$697b,$005a,$693b,
     $18d3,$687a,$18d2,$230b,$18fb,$7812,$701a,$2300,$60fb,$e080,$2009,$183b,$220b,$18ba,$7812,$213f,
     $438a,$701a,$183b,$781b,$2bc0,$d105,$220a,$18bb,$18ba,$7812,$701a,$e01e,$2309,$18fb,$781b,$2b00,
     $d107,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,$e011,$2309,$18fb,$781b,$2b80,$d107,$220a,$18bb,
     $18ba,$7812,$2101,$430a,$701a,$e004,$220a,$18bb,$18ba,$7812,$701a,$200a,$183a,$183b,$781b,$18db,
     $7013,$210b,$187b,$187a,$7812,$0092,$701a,$2409,$193b,$187a,$7812,$213f,$438a,$701a,$193b,$781b,
     $2bc0,$d104,$183b,$183a,$7812,$701a,$e01e,$2309,$18fb,$781b,$2b00,$d107,$220a,$18bb,$18ba,$7812,
     $2101,$430a,$701a,$e011,$2309,$18fb,$781b,$2b80,$d107,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,
     $e004,$220a,$18bb,$18ba,$7812,$701a,$693b,$2b01,$d102,$68fb,$2b01,$d005,$230a,$18fa,$18fb,$781b,
     $18db,$7013,$220b,$18bb,$18ba,$7812,$0092,$701a,$68fb,$3301,$60fb,$68fb,$2b01,$d800,$e77a,$693b,
     $3301,$613b,$693b,$2b01,$d800,$e766,$230a,$18fb,$781b,$0018,$f000,$fa70,$697b,$3301,$617b,$697a,
     $2394,$015b,$429a,$d200,$e750,$2026,$f000,$fa3c,$2300,$617b,$e0a8,$230a,$18fb,$2200,$701a,$2300,
     $613b,$e094,$697b,$005a,$693b,$18d3,$687a,$18d2,$230b,$18fb,$7812,$701a,$2300,$60fb,$e080,$2009,
     $183b,$220b,$18ba,$7812,$213f,$438a,$701a,$183b,$781b,$2bc0,$d105,$220a,$18bb,$18ba,$7812,$701a,
     $e01e,$2309,$18fb,$781b,$2b00,$d107,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,$e011,$2309,$18fb,
     $781b,$2b80,$d105,$220a,$18bb,$18ba,$7812,$701a,$e006,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,
     $200a,$183a,$183b,$781b,$18db,$7013,$210b,$187b,$187a,$7812,$0092,$701a,$2409,$193b,$187a,$7812,
     $213f,$438a,$701a,$193b,$781b,$2bc0,$d104,$183b,$183a,$7812,$701a,$e01e,$2309,$18fb,$781b,$2b00,
     $d107,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,$e011,$2309,$18fb,$781b,$2b80,$d105,$220a,$18bb,
     $18ba,$7812,$701a,$e006,$220a,$18bb,$18ba,$7812,$2101,$430a,$701a,$693b,$2b01,$d102,$68fb,$2b01,
     $d005,$230a,$18fa,$18fb,$781b,$18db,$7013,$220b,$18bb,$18ba,$7812,$0092,$701a,$68fb,$3301,$60fb,
     $68fb,$2b01,$d800,$e77a,$693b,$3301,$613b,$693b,$2b01,$d800,$e766,$230a,$18fb,$781b,$0018,$f000,
     $f9bb,$697b,$3301,$617b,$697a,$2394,$015b,$429a,$d200,$e750,$f000,$fad2,$46c0,$46bd,$b007,$bd90,
     $0000,$b590,$b590,$b085,$af00,$6078,$4b3b,$681b,$b29b,$2100,$0018,$f000,$fb1d,$2001,$f000,$f94e,
     $4b36,$681b,$b29b,$2101,$0018,$f000,$fb13,$2002,$f000,$f944,$4b32,$0018,$f000,$fb26,$2037,$f000,
     $f963,$2000,$f000,$f988,$2000,$f000,$f985,$2000,$f000,$f982,$2000,$f000,$f97f,$2000,$f000,$f97c,
     $2040,$f000,$f979,$2000,$f000,$f976,$2000,$f000,$f973,$2000,$f000,$f970,$2000,$f000,$f96d,$203c,
     $f000,$f942,$2080,$f000,$f967,$2022,$f000,$f93c,$20c0,$f000,$f961,$2020,$f000,$f936,$f000,$f91c,
     $2328,$33ff,$227f,$2100,$2000,$f000,$f97d,$2100,$2000,$f000,$f9c3,$2024,$f000,$f926,$230e,$18fb,
     $2200,$801a,$e00d,$240e,$193b,$881b,$687a,$18d3,$781b,$0018,$f000,$f940,$193b,$881a,$193b,$3201,
     $801a,$230e,$18fb,$881a,$2394,$015b,$429a,$d3ea,$f000,$faf0,$46c0,$46bd,$b005,$bd90,$4368,$2000,
     $0510,$2000,$b580,$af00,$2010,$f000,$f8fd,$2001,$f000,$f922,$2064,$f000,$f8d1,$46c0,$46bd,$bd80,
     $b580,$af00,$b580,$af00,$b403,$4905,$600d,$604e,$608f,$4640,$60c8,$bc03,$46c0,$46bd,$bd80,$0000,
     $43ec,$2000,$b580,$b084,$af00,$60f8,$60b9,$607a,$603b,$4b1c,$687a,$601a,$4b1b,$68fa,$601a,$4b1b,
     $683a,$601a,$4b1a,$68ba,$601a,$4b1a,$2212,$601a,$4b19,$2213,$601a,$4b13,$681b,$b29b,$2101,$0018,
     $f000,$faba,$4b10,$681b,$b29b,$2101,$0018,$f000,$fab3,$4b0f,$681b,$b29b,$2101,$0018,$f000,$faac,
     $4b0a,$681b,$b29b,$2100,$0018,$f000,$faa5,$4b08,$681b,$b29b,$2101,$0018,$f000,$fa4c,$46c0,$46bd,
     $b004,$bd80,$4368,$2000,$4360,$2000,$4354,$2000,$435c,$2000,$4358,$2000,$4364,$2000,$6680,$0000,
     $0000,$0000,$0040,$0000,$6610,$0000,$0000,$0000,$0020,$0000,$6680,$0000,$0000,$0000,$0040,$0000,
     $6610,$0000,$0000,$0000,$0020,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0814,$0000,$0000,$0a01,
     $000a,$0a0a,$0100,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0814,$0100,$0000,$0001,$0000,$0000,$0100,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$4444,$4444,$b580,$af00,$4b10,$681b,$b29b,$2101,$0018,$f000,
     $f9e9,$200a,$f000,$f81a,$4b0b,$681b,$b29b,$2100,$0018,$f000,$f9df,$2002,$f000,$f810,$4b06,$681b,
     $b29b,$2101,$0018,$f000,$f9d5,$200a,$f000,$f806,$46c0,$46bd,$bd80,$46c0,$4368,$2000,$b580,$b082,
     $af00,$6078,$687b,$0018,$f000,$fa40,$46c0,$46bd,$b002,$bd80,$0000,$b580,$b580,$af00,$4b09,$681b,
     $b29b,$0018,$f000,$fa42,$1e03,$d003,$2032,$f7ff,$ffe5,$e7f3,$46c0,$2032,$f7ff,$ffe0,$46c0,$46bd,
     $bd80,$46c0,$4354,$2000,$b580,$b082,$af00,$0002,$1dfb,$701a,$4b0e,$681b,$b29b,$2100,$0018,$f000,
     $f999,$4b0c,$681b,$b29b,$2100,$0018,$f000,$f992,$1dfb,$781b,$0018,$f000,$fa2b,$4b06,$681b,$b29b,
     $2101,$0018,$f000,$f986,$46c0,$46bd,$b002,$bd80,$4360,$2000,$435c,$2000,$b580,$b082,$af00,$0002,
     $1dfb,$701a,$4b0e,$681b,$b29b,$2101,$0018,$f000,$f971,$4b0c,$681b,$b29b,$2100,$0018,$f000,$f96a,
     $1dfb,$781b,$0018,$f000,$fa03,$4b06,$681b,$b29b,$2101,$0018,$f000,$f95e,$46c0,$46bd,$b002,$bd80,
     $4360,$2000,$435c,$2000,$b5b0,$b082,$af00,$0005,$000c,$0010,$0019,$1dbb,$1c2a,$801a,$1d3b,$1c22,
     $801a,$1cbb,$1c02,$801a,$003b,$1c0a,$801a,$2044,$f7ff,$ff9a,$1dbb,$881b,$08db,$b29b,$b2db,$0018,
     $f7ff,$ffba,$1cbb,$881b,$08db,$b29b,$b2db,$0018,$f7ff,$ffb2,$2045,$f7ff,$ff87,$1d3b,$881b,$b2db,
     $0018,$f7ff,$ffa9,$1d3b,$881b,$0a1b,$b29b,$b2db,$0018,$f7ff,$ffa1,$003b,$881b,$b2db,$0018,$f7ff,
     $ff9b,$003b,$881b,$0a1b,$b29b,$b2db,$0018,$f7ff,$ff93,$46c0,$46bd,$b002,$bdb0,$b580,$b580,$b082,
     $af00,$0002,$1dbb,$801a,$1d3b,$1c0a,$801a,$204e,$f7ff,$ff5a,$1dbb,$881b,$b2db,$0018,$f7ff,$ff7c,
     $204f,$f7ff,$ff51,$1d3b,$881b,$b2db,$0018,$f7ff,$ff73,$1d3b,$881b,$0a1b,$b29b,$b2db,$0018,$f7ff,
     $ff6b,$46c0,$46bd,$b002,$bd80,$0000,$b580,$b082,$af00,$6078,$687b,$0018,$f000,$f8f6,$203f,$f7ff,
     $ff33,$687b,$3399,$781b,$0018,$f7ff,$ff55,$2003,$f7ff,$ff2a,$687b,$339a,$781b,$0018,$f7ff,$ff4c,
     $2004,$f7ff,$ff21,$687b,$339b,$781b,$0018,$f7ff,$ff43,$687b,$339c,$781b,$0018,$f7ff,$ff3d,$687b,
     $339d,$781b,$0018,$f7ff,$ff37,$202c,$f7ff,$ff0c,$687b,$339e,$781b,$0018,$f7ff,$ff2e,$46c0,$46bd,
     $b002,$bd80,$b580,$af00,$6000,$0000,$0000,$0000,$0000,$0000,$6020,$0010,$0000,$0000,$0000,$0000,
     $6028,$0014,$0000,$0000,$0000,$0000,$602a,$0015,$0000,$0000,$0000,$0000,$9000,$0000,$0000,$0000,
     $0000,$0000,$0200,$0500,$0014,$1e00,$001e,$0000,$0100,$0200,$0500,$0014,$0000,$0000,$0000,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$2224,$2222,$b580,$af00,
     $2022,$f7ff,$feb1,$20c7,$f7ff,$fed6,$2020,$f7ff,$feab,$f7ff,$fe91,$46c0,$46bd,$bd80,$b580,$af00,
     $4000,$0000,$0000,$0000,$0000,$0000,$8080,$0000,$0000,$0000,$0000,$0000,$4040,$0000,$0000,$0000,
     $0000,$0000,$8000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$000a,$0000,
     $0000,$0102,$0000,$0000,$0000,$0001,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,
     $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000,$2222,$2222,$b580,$b082,$af00,$0002,$1dbb,$801a,
     $1d7b,$1c0a,$701a,$1dbb,$881a,$1d7b,$781b,$1e59,$418b,$b2db,$0019,$0010,$f000,$f8a0,$46c0,$46bd,
     $b002,$bd80,$b580,$b082,$b590,$b085,$af00,$6078,$2032,$f7ff,$fe39,$230f,$18fb,$2200,$701a,$e00d,
     $240f,$193b,$781b,$687a,$18d3,$781b,$0018,$f7ff,$fe53,$193b,$781a,$193b,$3201,$701a,$230f,$18fb,
     $781b,$2b98,$d9ec,$f7ff,$fe07,$46c0,$46bd,$b005,$bd90,$b580,$b580,$af00,$2022,$f7ff,$fe15,$200f,
     $f7ff,$fe3a,$2020,$f7ff,$fe0f,$f7ff,$fdf5,$46c0,$46bd,$bd80,$b5b0,$b082,$b580,$b082,$af00,$0002,
     $1dbb,$801a,$1d3b,$1c0a,$801a,$1dbb,$881b,$0018,$f000,$f872,$1d3b,$881b,$2b00,$d003,$1d3b,$881b,
     $2b00,$d106,$1dbb,$881b,$2100,$0018,$f000,$f880,$e006,$1dbb,$881b,$2101,$0018,$f000,$f879,$46c0,
     $46c0,$46bd,$b002,$bd80,$b580,$b082,$b580,$b082,$af00,$6078,$6878,$239a,$2200,$2100,$f000,$f886,
     $46c0,$46bd,$b002,$bd80,$b580,$b084,$b580,$b082,$af00,$0002,$1dbb,$801a,$1dbb,$881b,$0018,$f000,
     $f88d,$0003,$0018,$46bd,$b002,$bd80,$b580,$b082,$b580,$b084,$af00,$0002,$1dfb,$701a,$1dfb,$781b,
     $60fb,$230c,$18f9,$2394,$2203,$2001,$f000,$f85e,$46c0,$46bd,$b004,$bd80,$b580,$b082,$b580,$b084,
     $af00,$6078,$000a,$1cfb,$701a,$2201,$687b,$409a,$0013,$60fb,$1cfb,$781b,$2b00,$d004,$68fb,$0018,
     $f000,$f870,$e003,$68fb,$0018,$f000,$f879,$46c0,$46bd,$b004,$bd80,$b580,$b580,$b082,$af00,$6078,
     $23d0,$061b,$2101,$687a,$4091,$000a,$629a,$23d0,$061b,$2101,$687a,$4091,$000a,$619a,$687b,$2105,
     $0018,$f000,$f86b,$46c0,$46bd,$b002,$bd80,$0000,$b580,$b084,$af00,$6078,$000a,$1cfb,$701a,$2201,
     $687b,$409a,$0013,$60fb,$1cfb,$781b,$2b00,$d004,$68fb,$0018,$f000,$f888,$e003,$68fb,$0018,$f000,
     $f891,$46c0,$46bd,$b004,$bd80,$b580,$b590,$b087,$af00,$60f8,$60b9,$607a,$603b,$4b07,$68db,$617b,
     $683b,$687a,$68b9,$68f8,$697c,$47a0,$0003,$0018,$46bd,$b007,$bd90,$46c0,$43ec,$2000,$b580,$b082,
     $af00,$6078,$23d0,$061b,$685a,$687b,$40da,$0013,$2201,$4013,$1e5a,$4193,$b2db,$0018,$46bd,$b002,
     $bd80,$b580,$b580,$b082,$af00,$6078,$23d0,$061b,$687a,$615a,$46c0,$46bd,$b002,$bd80,$b580,$b082,
     $b580,$b082,$af00,$6078,$23d0,$061b,$687a,$619a,$46c0,$46bd,$b002,$bd80,$b580,$b084,$b580,$b088,
     $af00,$6078,$000a,$1cfb,$701a,$687b,$0018,$f000,$f847,$687b,$009b,$4a12,$4694,$4463,$61fb,$2340,
     $61bb,$23c0,$617b,$69fb,$681a,$69bb,$4053,$697a,$4013,$69fa,$613a,$60fb,$693b,$2280,$0152,$4313,
     $68fa,$601a,$46c0,$46c0,$4906,$1cfb,$781a,$687b,$00db,$18cb,$3304,$601a,$46c0,$46bd,$b008,$bd80,
     $c004,$4001,$4000,$4001,$b580,$b082,$af00,$6078,$23d0,$061b,$687a,$625a,$46c0,$46bd,$b002,$bd80,
     $b580,$b082,$b580,$b082,$af00,$6078,$23d0,$061b,$687a,$629a,$46c0,$46bd,$b002,$bd80,$b580,$b084,
     $b580,$b082,$af00,$6078,$46c0,$46bd,$b002,$bd80,$0000,$b580

REM 0 bytes
LABEL C_RODATA
